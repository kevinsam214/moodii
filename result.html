<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä½ çš„å¿ƒèªç²¾éˆå›æ‡‰</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet" />
  <style>
    .container {
      opacity: 0;
      animation: fadeIn 1.2s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    .hero-img {
      max-width: 260px;
      margin-bottom: 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-6px);
      }
    }

    .mood-response {
      font-size: 18px;
      color: #5d4440;
      background-color: #FFF3EC;
      padding: 16px;
      border-radius: 12px;
      max-width: 300px;
      margin: 24px auto 16px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      min-height: 60px;
      white-space: pre-line;
    }
  </style>
</head>

<body>
  <div class="container">
    <img id="moodiiImage" src="images/moodii-default.png" alt="Moodii ç²¾éˆ" class="hero-img" />
    <div id="emotion-message" class="mood-response">è¼‰å…¥ä¸­...</div>

    <button class="main-btn" onclick="window.location.href='index.html'">å›é¦–é </button>
    <button class="secondary-btn" onclick="window.location.href='history.html'">æŸ¥çœ‹æ­·å²ç´€éŒ„</button>
  </div>

  <script>
    const mood = localStorage.getItem("selectedMood");

    const moodData = {
      happy: {
        img: "hedgehog-happy.png",
        text: "ä½ ä»Šå¤©çš„ç¬‘å®¹ï¼Œå¥½æœ‰åŠ›é‡ ğŸ’›"
      },
      neutral: {
        img: "hedgehog-neutral.png",
        text: "å¹³æ·¡ä¹Ÿå¾ˆæ£’ï¼Œçµ¦è‡ªå·±ä¸€é»ç©ºç™½å§ ğŸŒ¿"
      },
      sad: {
        img: "hedgehog-sad.png",
        text: "æˆ‘åœ¨é€™è£¡é™ªä½ ï¼Œé›£éæ²’é—œä¿‚ ğŸ’§"
      },
      tired: {
        img: "hedgehog-tired.png",
        text: "å…ˆæŠŠç–²æ†Šäº¤çµ¦æˆ‘ï¼Œæˆ‘å¹«ä½ æŠ±æŠ± ğŸ’­"
      },
      angry: {
        img: "hedgehog-angry.png",
        text: "ä½ åŠªåŠ›å¿ä½æƒ…ç·’äº†ï¼ŒçœŸçš„å¾ˆæ£’ â¤ï¸â€ğŸ”¥"
      }
    };

    const image = document.getElementById("moodiiImage");
    const box = document.getElementById("emotion-message");

    // ğŸ“Œ å–å¾—å°æ‡‰è³‡æ–™
    const data = moodData[mood] || {
      img: "moodii-default.png",
      text: "ä½ å¥½æ£’ï¼Œé¡˜ä½ æ¯å¤©éƒ½æœ‰åŠ›é‡ ğŸ€"
    };

    // ğŸ–¼ï¸ è¨­å®šåœ–ç‰‡
    image.src = "images/" + data.img;

    // ğŸ“ æ‰“å­—å‹•ç•«å‡½å¼
    function typeText(text, targetElement, delay = 40) {
      let index = 0;
      targetElement.textContent = "";
      const timer = setInterval(() => {
        targetElement.textContent += text.charAt(index);
        index++;
        if (index >= text.length) clearInterval(timer);
      }, delay);
    }

    // ğŸ”Š èªéŸ³æœ—è®€å‡½å¼
    function speak(text) {
      if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'zh-TW';
        msg.pitch = 1;
        msg.rate = 1;
        msg.volume = 1;
        window.speechSynthesis.speak(msg);
      }
    }

    // âœ… å•Ÿå‹•æ‰“å­—å‹•ç•« + èªéŸ³
    typeText(data.text, box);
    speak(data.text);
  </script>
</body>

</html>